빈의 스코프
: ioC컨테이너 생성된 빈의 인스턴스 개수, 범위를 의미한다. 크게 싱글톤과 프로토타입으로 나눠진다.
1. 싱글톤과 프로토타입
1.1 싱글톤
- 싱글톤으로 생성된 빈은 인스턴스가 하나만 만들어진다. 빈이 사용될 땐 이 하나의 인스턴스만 참조한다.
1.2 프로토타입
1.3 프로토타입을 싱글톤에서 사용할 때
- 싱글톤 빈을 여러개 만들면 프로토타입 빈 인스턴스가 매번 새로 생겨야 하는데 하나의 인스턴스만 사용하게된다.
1.3.1 해결책
프로토타입을 상속하는 프록시 타입으로 프로토타입을 감씨준다. 싱글톤 빈에서 직접 프로토타입 빈을 참조하지 않기 때문에 새로운 인스턴스가 생길 수 있다.
0. 질문
- 대부분의 스코프가 싱글톤이라고 하는데, 스프링 전체에서 싱글톤을 쓰면 부수효과가 날 가능성은 없는가?
가능성이 당연히 있다. 멀티쓰레드 환경에서는 예상 못한 부수효과가 발생할 수 있다. 이 때 동기화 혹은 락을 이용해 부수효과가 일어나지 않게 사용해야 한다. (edited) 